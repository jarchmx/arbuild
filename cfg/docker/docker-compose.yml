version: "3"

# More info at https://github.com/oracle/opengrok/docker/
services:
  opengrok:
    container_name: opengrok
    image: opengrok/docker:latest
    ports:
      - "8080:8080/tcp"
    environment:
      REINDEX: '600000000'
    # Volumes store your data between container upgrades
    volumes:
      - '/home/$USER/:/home/$USER'  # source code
      - '/home/$USER/opengrok/src/:/opengrok/src/'  # source code
      - '/home/$USER/opengrok/etc/:/opengrok/etc/'  # folder contains configuration.xml
      - '/home/$USER/opengrok/data/:/opengrok/data/'  # index and other things for source code
  
  askeysz_dns:
    container_name: jhu_dns
    image: jpillora/dnsmasq:latest
    ports:
      - "5380:8080/tcp"
      - "53:53/udp"
    environment:
      HTTP_USER: 'foo'
      HTTP_PASS: 'bar'
    # Volumes store your data between container upgrades
    volumes:
      - '/home/$USER/jhscript/cfg/docker/dnsmasq.conf:/etc/dnsmasq.conf'  #dnsmasq.conf
